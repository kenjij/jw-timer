'use strict';var shared;var Timer=React.createClass({displayName:'Timer',getInitialState:function getInitialState(){return{ms:0,endtime:0,mode:0,running:false}},start:function start(min){document.body.style.WebkitAnimation=null;this.setState({ms:60000*min,endtime:Date.now()+60000*min,mode:min});if(min==0){this.stopClock()}else{this.runClock()};},stop:function stop(){var running=arguments.length<=0||arguments[0]===undefined?true:arguments[0];if(running){this.stopClock()}else{this.resume()}},resume:function resume(){this.setState({endtime:Date.now()+this.state.ms});this.runClock()},timeup:function timeup(){document.body.style.WebkitAnimation='timeup 1s linear 0s 10 normal';this.stopClock()},runClock:function runClock(){if(!this.interval){this.interval=setInterval(this.tick,100);this.setState({running:true})}},stopClock:function stopClock(){if(this.interval){clearInterval(this.interval);this.interval=null;this.setState({running:false})}},tick:function tick(){var nowt=Date.now();var ms=this.state.endtime-Date.now();if(ms<0){ms=0;this.timeup()}this.setState({ms:ms})},render:function render(){return React.createElement('div',null,React.createElement('p',null,React.createElement(Clock,{ms:this.state.ms}),React.createElement(PBar,{ms:this.state.ms,mode:this.state.mode,running:this.state.running})),React.createElement('p',{id:'ctrlbtns'},React.createElement(TButtons,{start:this.start,mode:this.state.mode}),React.createElement('br',null),React.createElement(SButton,{stop:this.stop,mode:this.state.mode,running:this.state.running})))}});var Clock=React.createClass({displayName:'Clock',render:function render(){var d=new Date(this.props.ms);var time=d.getUTCMinutes()+':'+('0'+d.getUTCSeconds()).slice(-2);var ds=('.'+d.getUTCMilliseconds()*0.01).slice(0,2);return React.createElement('div',{id:'clock'},React.createElement('span',{id:'clocktime'},time),React.createElement('span',{id:'clockds'},ds))}});var TButtons=React.createClass({displayName:'TButtons',render:function render(){var cn='btn btn-info btn-lg';var st=this.props.start;var mode=this.props.mode;var buttons=[];var mins;if(typeof timers==='undefined'){mins=[0,2,4,6,8,10,30]}else{mins=timers}mins.forEach(function(min){var a='';var t;if(min>0&&min==mode){a=' active'};if(min==0){t='Reset'}else{t=min};var bt=React.createElement('div',{className:'btn-group',role:'group'},React.createElement('button',{className:cn+a,onClick:st.bind(this,min)},t));buttons.push(bt)});return React.createElement('div',{className:'btn-group btn-group-justified',role:'group'},buttons)}});var SButton=React.createClass({displayName:'SButton',render:function render(){var attr={className:'btn btn-warning btn-lg btn-block',onClick:this.props.stop.bind(this,this.props.running),disabled:this.props.mode==0};var act='play';if(this.props.running){act='pause'};var icon=React.createElement('span',{className:'glyphicon glyphicon-'+act});return React.createElement('button',attr,icon)}});var PBar=React.createClass({displayName:'PBar',render:function render(){var p;if(this.props.mode>0){var m=this.props.mode*60000;var n=m-this.props.ms;p=n/m}else{p=0}var w=(p*100).toString().slice(0,6)+'%';var s,t;switch(true){case p>=1:case p>0.9:s='danger';break;case p>0.75:s='warning';break;default:s='success';break;}if(this.props.running){s=s+' progress-bar-striped active'};var attr={c:'progress-bar progress-bar-'+s,r:'progressbar',s:{width:w}};return React.createElement('div',{className:'progress'},React.createElement('div',{className:attr.c,role:attr.r,style:attr.s},t))}});ReactDOM.render(React.createElement(Timer,null),document.getElementById('timer'));
